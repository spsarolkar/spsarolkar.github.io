<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800">
    <link rel='stylesheet' href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link href="/css/styles.css" rel="stylesheet" >
    <title>Struts 1.3.10 not backward compatible with Struts 1.2.9/1.2.4</title>
    <meta name="description" content="Recently while working on one of the application built on top of Struts 1.2.4, there was a security vulnerability reported by Varacode scan asking us to upgr...">
    <link rel="canonical" href="http://localhost:4000/struts/13/backword/compatibility/2016/10/11/Struts2-backward-compatibility-issue.html">
    <link rel="alternate" type="application/rss+xml" title="Sunil Sarolkar" href="/feed.xml">
  <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
  
</head>


  <body>

    <div class="container-fluid">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary dropdown">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Index</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://docs.google.com/document/d/1lBajhi_YjRYu2kEF9YFi9jUbzvy_mJVcvY_TP5AAFLI/edit?usp=sharing">Profile</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
      </ul>
    </div>
  </nav>
</div>



    <div class="container text-xs-center text-md-left">
        <div class="row mt-4">
  <div class="col-sm-1"></div>
  <div class="col-sm-10">
    <h3>Struts 1.3.10 not backward compatible with Struts 1.2.9/1.2.4</h3>
    <p class="lead">Posted on 
      Oct 11, 2016 </p>
    <p><p>Recently while working on one of the application built on top of Struts 1.2.4, there was a security vulnerability reported by Varacode scan asking us to upgrade to latest Struts 1 version 1.3.10.</p>

<p>Our organisation manages java libraries in Nexus Maven repository, the application built around 6 years back which does not make use of Maven for managing its dependencies. As a security mandate we must use our internal Maven Nexus repository to obtain all dependent jars of Struts 1.3.10 and put them manually in the classpath of ant script.</p>

<p>Fortunately good people at Apache Software Foundation have already thought about the problem and have built maven dependencies plugin which allows us to easily download the dependencies of any artifact, so I followed below steps to download these dependencies</p>

<ol>
  <li>I created one blank maven project in Eclipse</li>
  <li>Updated the pom.xml as follows</li>
</ol>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></td><td class="code"><pre><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.test<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>dependencydownload<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  
 <span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.10<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>copy-dependencies<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>install<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/dependencies<span class="nt">&lt;/outputDirectory&gt;</span>
              <span class="nt">&lt;overWriteReleases&gt;</span>false<span class="nt">&lt;/overWriteReleases&gt;</span>
              <span class="nt">&lt;overWriteSnapshots&gt;</span>false<span class="nt">&lt;/overWriteSnapshots&gt;</span>
              <span class="nt">&lt;overWriteIfNewer&gt;</span>true<span class="nt">&lt;/overWriteIfNewer&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
 <span class="nt">&lt;/build&gt;</span>
    
    <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.struts<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>struts-core<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.3.10<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/project&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>As highlighted in above pom.xml dependencies plugin will execute on maven install phase and will store its dependencies in</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">${</span><span class="nv">project</span><span class="p">.build.directory</span><span class="k">}</span>/dependencies<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>folder which as per Maven convention is your target/dependencies directory.</p>

<p>If your organisation uses custom Maven setup then this default may refer to some other directory. Once you run command mvn install either from command line or from Eclipse you should get all your dependencies in your target/dependencies</p>

<p>Once you obtain all the dependencies you can easily add them in ant script.</p>

<p>Making struts configuration changes.</p>

<p>After updating jars you need to follow below instructions to get the application working.</p>

<ol>
  <li>
    <p>Identify if there are any tag libraries copied from older struts jars to your web application. If there are you need to replace them from the new struts jar.</p>
  </li>
  <li>
    <p>Identify any custom tags defined which points to older struts tag classes, if you find you need to search for new class package [ Donâ€™t forget to use Eclipse Ctrl-Shift-T ] Once you make above changes hopefully you will have your application up and running.</p>
  </li>
</ol>

<p>Hope this helps.</p>
</p>
    <p class="border-top border-primary">
    <h3 class="text-primary">Add Comment</h3>
      <form method="POST"  action="https://api.staticman.net/v2/entry/spsarolkar/spsarolkar.github.io/master/comments">

        <input name="options[redirect]" type="hidden" value="/struts/13/backword/compatibility/2016/10/11/Struts2-backward-compatibility-issue.html">
        <!-- e.g. "2016-01-02-this-is-a-post" -->
        <input name="options[slug]" type="hidden" value="Struts2-backward-compatibility-issue">
        <div class="form-group">
      <label for="inputEmail">Email address</label>
      <input type="email" name="fields[email]" class="form-control" id="inputEmail" aria-describedby="emailHelp" placeholder="Enter email" />
      <small id="emailHelp" class="form-text text-muted">I'll never share your email with anyone else.</small>
    </div>
    <div class="form-group">
      <label for="inputName">Name</label>
      <input type="text" name="fields[name]" class="form-control" id="inputName" aria-describedby="nameHelp" placeholder="Enter name" />
      <small id="nameHelp" class="form-text text-muted">Your Name as will be printed on the screen</small>
    </div>
    <div class="form-group">
      <label for="inputMessage">Message</label>
      <textarea id="inputMessage" class="form-control"  name="fields[message]" aria-label="Add comment message"></textarea>
    </div>
    <div class="form-group mt-4">
      <button type="button" class="btn btn-primary btn-lg ">Go !</button>
    </div>

      </form>
    </p>
  </div>
  <div class="col-sm-1"></div>
</div>

    </div>
      
    <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

  </body>

</html>
