<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Understanding Spring Boot Security configuration | Sunil P. Sarolkar </title> <meta name="author" content="Sunil P. Sarolkar"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://spsarolkar.github.io/blog/2018/Understanding-Spring-Boot-Security-Configuration/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Sunil</span> P. Sarolkar </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">reviews </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/books/">bookshelf</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Understanding Spring Boot Security configuration</h1> <p class="post-meta"> Created on September 09, 2018 </p> <p class="post-tags"> <a href="/blog/2018"> <i class="fa-solid fa-calendar fa-sm"></i> 2018 </a>   ·   <a href="/blog/category/spring-boot"> <i class="fa-solid fa-tag fa-sm"></i> spring-boot</a>   <a href="/blog/category/spring-security"> <i class="fa-solid fa-tag fa-sm"></i> spring-security</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Spring boot came with many useful features and for most of the usual use cases we have all implementation already provided by Spring its just a matter of configuring it that suite our needs. One of the feature is spring security. I would assume that you have basic understanding of how Servlet Containers work. We will start with creating the sample application from <a href="https://start.spring.io" rel="external nofollow noopener" target="_blank">Spring Initializr</a>. Make sure you select Web and Security under “Search for dependencies” field. Once you download the zip file you will have standalone spring-boot application ready. You can simply run it using maven with command <code class="language-plaintext highlighter-rouge">mvn spring-boot:run</code></p> <p>You would notice that the application does not came with any <code class="language-plaintext highlighter-rouge">web.xml</code> file which was the main file that was used for configuring the DispatcherServlet used by Spring, this is because new Servlet API provides interface <code class="language-plaintext highlighter-rouge">ServletContainerInitializer</code>. Any class that implements this interface can configure the all the Servlet configuration on the fly, this allows Spring to hook up the new Filters and Servlet to be used by application on the fly. This feature allows configuration driven filter proxy to be used for authorization and authentication. We will see useful classes and intefaces defined by Spring that makes authentication and authorization.</p> <p>Any configuration for spring-security starts with extending <code class="language-plaintext highlighter-rouge">WebSecurityConfigurerAdapter</code>, this abstract class provides convenient methods for configuring spring security configuration using <code class="language-plaintext highlighter-rouge">HTTPSecurity</code> object. We will see how to use HTTPSecurity to configure authentication and authorization for our application below</p> <h5 id="restricting-the-httpsecurity-to-only-specific-urls">Restricting the HTTPSecurity to only specific urls</h5> <p>Consider the case that part of the web application urls are publicly accessible and part needs any special access. To achive this purpose HTTPSecurity provides methods as mentioned below</p> <h6 id="1-requestmatcher--to-enable-httpsecurity-for-specific-url-and-specific-http-method">1. requestMatcher : To enable <code class="language-plaintext highlighter-rouge">HTTPSecurity</code> for specific url and specific http method</h6> <p>If you want to restrict HTTPSSecurity only for specific url pattern then we have to use requestMatcher.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.requestMatcher(new AntPathRequestMatcher("/restricted/**",HttpMethod.POST.toString())).authorizeRequests().anyRequest().authenticated();
    }
</code></pre></div></div> <p>Above code will authorize any <code class="language-plaintext highlighter-rouge">POST</code> requested that is authenticated matching the pattern <code class="language-plaintext highlighter-rouge">/restricted/**</code></p> <h6 id="2-antmatcher--to-enable-httpsecurity-for-specific-url-pattern-irrespective-of-specific-http-method">2. antMatcher : To enable <code class="language-plaintext highlighter-rouge">HTTPSecurity</code> for specific url pattern irrespective of specific http method</h6> <p>If we dont need to restrict any specific HTTP method then we can make use of <code class="language-plaintext highlighter-rouge">antMatcher</code> as below</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http.antMatcher("/restricted/**").authorizeRequests().anyRequest().authenticated();
</code></pre></div></div> <h6 id="3-requestmatchers--to-enable-httpsecurity-for-multiple-url-pattern-for-multiple-http-method">3. requestMatchers : To enable <code class="language-plaintext highlighter-rouge">HTTPSecurity</code> for multiple url pattern for multiple http method</h6> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http.requestMatchers().
                antMatchers(HttpMethod.GET,"/restricgted/get/**","/restricgted2/get/**").
                antMatchers(HttpMethod.POST,"/restricgted/post/**","/restricgted2/post/**").
                and().authorizeRequests().anyRequest().authenticated();
</code></pre></div></div> <p>Above configuration will enable HTTPSecurity for any GET request with url patterns “/restricgted/get/<strong>” and “/restricgted2/get/</strong>” and any POST method with patterns “/restricgted/post/<strong>” and “/restricgted2/post/</strong>”</p> <p>All above cases will trigger <code class="language-plaintext highlighter-rouge">HTTPSecurity</code> for specific matchers, please note that <code class="language-plaintext highlighter-rouge">authorizeRequests()</code> method used above returns the <code class="language-plaintext highlighter-rouge">HTTPsecurity</code> object itself so its possible to skip <code class="language-plaintext highlighter-rouge">requestMatchers</code> or <code class="language-plaintext highlighter-rouge">antMatcher</code> configuration and streight away call <code class="language-plaintext highlighter-rouge">authorizeRequests</code> which will by default disable any filtering and enable HTTPSecurity for all the urls instead of filtered above.</p> <h5 id="lets-dig-deeper-into-the-important-interfaces-come-into-picture-for-spring-security-authentication">Lets dig deeper into the important interfaces come into picture for Spring Security Authentication</h5> <p>Spring Security relies on Servlet API Filters for controlling the flow for authentication. The main interface that is responsible for Authentication is <code class="language-plaintext highlighter-rouge">AuthenticationManager</code>. This interface provides single <code class="language-plaintext highlighter-rouge">authenticate</code> method. This method validates the credentials from <code class="language-plaintext highlighter-rouge">Authentication</code> object passed. Authentication manager generally chose whether it can return the Authentication object with <code class="language-plaintext highlighter-rouge">authenticated="true"</code> or it can throw <code class="language-plaintext highlighter-rouge">AuthenticationException</code> if the credentials do not match. Authentication manager cannot decide it should return <code class="language-plaintext highlighter-rouge">null</code>.</p> <p><code class="language-plaintext highlighter-rouge">AuthenticationManager</code> has multiple implementations of <code class="language-plaintext highlighter-rouge">ProviderManager</code>, the provider manager passes on the <code class="language-plaintext highlighter-rouge">Authentication</code> through the chain of <code class="language-plaintext highlighter-rouge">AuthenticationProvider</code>. Once any <code class="language-plaintext highlighter-rouge">AuthenticationProvider</code> returns the non null value the Authentication is marked as completed. Actual authentication happens in <code class="language-plaintext highlighter-rouge">AuthenticationProvider</code> implementation. To hook up custom <code class="language-plaintext highlighter-rouge">AuthenticationProvider</code> the <code class="language-plaintext highlighter-rouge">WebSecurityConfigurerAdapter</code> provides helper method</p> <p>The authentication filter has knowledge of which <code class="language-plaintext highlighter-rouge">AuthenticationManager</code> to use for authentication and during filter initialisation this AuthenticationManager also gets initialised. When we configure the httpSecurity object via <code class="language-plaintext highlighter-rouge">WebSecurityConfigurerAdapter</code> by default <code class="language-plaintext highlighter-rouge">AuthenticationFilter</code> gets initialised which makes use of <code class="language-plaintext highlighter-rouge">AuthenticationManager</code> with Username and Password authentication.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">AuthenticationManagerBuilder</span> <span class="n">builder</span><span class="o">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">AuthenticationManagerBuilder</code> has <code class="language-plaintext highlighter-rouge">authenticationProvider</code> method that is used to set the local authentication provider for specific If you provide the override this will configure the <code class="language-plaintext highlighter-rouge">local</code> AuthenticationProvider that is specific to <code class="language-plaintext highlighter-rouge">WebSecurityConfigurerAdapter</code> implementation. For all usual use cases this would be sufficient. If you want to configure it for global, the we need inject global <code class="language-plaintext highlighter-rouge">AuthenticationManagerBuilder</code> and call its <code class="language-plaintext highlighter-rouge">authenticationProvider</code> method.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">AuthenticationManagerBuilder</span> <span class="n">builder</span><span class="o">)</span>
</code></pre></div></div> <p>We can provide multiple implementations of <code class="language-plaintext highlighter-rouge">WebSecurityConfigurerAdapter</code> in the single application to configure separate filter matching the specific <code class="language-plaintext highlighter-rouge">requestMatchers</code> and <code class="language-plaintext highlighter-rouge">antMatcher</code>. In every implementation we can configure seperate <code class="language-plaintext highlighter-rouge">authenticationProvider</code> using overriden <code class="language-plaintext highlighter-rouge">public configure(AuthenticationManagerBuilder builder)</code>.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2019/Configuring-Redis-High-Availability-Sentinel-Configuration/">Redis High Availability Solution using Redis Sentinel and docker</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/Plybar-does-not-support-bridge-interface/">Polybar does not support the bridge interface for network tracking</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/Google-cloud-kubernetes-example/">Google cloud kubernetes example</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/Building-Microservices-Using-Docker/">Building microservices using docker swarm with Oauth2</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/Maven-cheatsheet/">Maven cheatsheet</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Sunil P. Sarolkar. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>