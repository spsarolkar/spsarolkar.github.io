<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1577" height="622" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[IoT Device->HomeAssistant:Register Device by publishing the MQTT message
Note right of HomeAssistant:HomeAssistant adds the device\n on UI with unavailable status
Note left of IoT Device:Device is initialised
IoT Device->HomeAssistant:MQTT message is published with status "device available"
Note right of HomeAssistant:HomeAssistant updates the device\n on UI with available status
IoT Device->HomeAssistant:IoT Device subscribes to command topic of MQTT
HomeAssistant->IoT Device:HomeAssistant publishes the status \non Command Topic when user updates the device from UI
Note left of IoT Device:When IoT device receives the message\non command topic it updates the device
IoT Device->HomeAssistant:IoT device publishes the message on \nState Topic HomeAssistant informing the command has been executed]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="371.25" y="20" width="120" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="381.25" y="45" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="381.25">IoT Device</tspan></text></g><g class="actor"><rect x="371.25" y="563.4375" width="120" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="381.25" y="588.4375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="381.25">IoT Device</tspan></text></g><line x1="431.25" x2="431.25" y1="58.75" y2="563.4375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="1026.25" y="20" width="150" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1036.25" y="45" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1036.25">HomeAssistant</tspan></text></g><g class="actor"><rect x="1026.25" y="563.4375" width="150" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1036.25" y="588.4375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1036.25">HomeAssistant</tspan></text></g><line x1="1101.25" x2="1101.25" y1="58.75" y2="563.4375" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="536.25" y="89.375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="536.25">Register Device by publishing the MQTT message</tspan></text><line x1="431.25" x2="1101.25" y1="97.5" y2="97.5" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1121.25" y="117.5" width="301.25" height="47.9375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1127.5" y="137.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1126.25">HomeAssistant adds the device</tspan><tspan dy="1.2em" x="1126.25">on UI with unavailable status</tspan></text></g><g class="note"><rect x="191.25" y="185.4375" width="220" height="28.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="196.25" y="205.4375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="196.25">Device is initialised</tspan></text></g><g class="signal"><text x="486.25" y="244.8125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="486.25">MQTT message is published with status "device available"</tspan></text><line x1="431.25" x2="1101.25" y1="252.9375" y2="252.9375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="1121.25" y="272.9375" width="331.25" height="47.9375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="1127.5" y="292.9375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="1126.25">HomeAssistant updates the device</tspan><tspan dy="1.2em" x="1126.25">on UI with available status</tspan></text></g><g class="signal"><text x="535.625" y="351.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="535.625">IoT Device subscribes to command topic of MQTT</tspan></text><line x1="431.25" x2="1101.25" y1="359.625" y2="359.625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="501.875" y="380.65625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="500.625">HomeAssistant publishes the status</tspan><tspan dy="1.2em" x="500.625">on Command Topic when user updates the device from UI</tspan></text><line x1="1101.25" x2="431.25" y1="417.5625" y2="417.5625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="20" y="437.5625" width="391.25" height="47.9375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="26.25" y="457.5625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="25">When IoT device receives the message</tspan><tspan dy="1.2em" x="25">on command topic it updates the device</tspan></text></g><g class="signal"><text x="441.25" y="506.53125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="441.25">IoT device publishes the message on</tspan><tspan dy="1.2em" x="441.25">State Topic HomeAssistant informing the command has been executed</tspan></text><line x1="431.25" x2="1101.25" y1="543.4375" y2="543.4375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>