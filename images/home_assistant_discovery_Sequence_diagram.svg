<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1227" height="824" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[IoT Device->HomeAssistant:Register Device by \npublishing the MQTT message
Note right of HomeAssistant:HomeAssistant adds the device\n on UI with unavailable status
Note left of IoT Device:Device is initialised
IoT Device->HomeAssistant:MQTT message is \npublished with status "device available"
Note right of HomeAssistant:HomeAssistant updates the device\n on UI with available status
IoT Device->HomeAssistant:IoT Device subscribes \nto command topic of MQTT
HomeAssistant->IoT Device:HomeAssistant publishes the \nstatus on Command Topic when \nuser updates the device from UI
Note left of IoT Device:When IoT device receives the \nmessage on command topic \nit updates the device
IoT Device->HomeAssistant:IoT device publishes the message on \nState Topic HomeAssistant informing \nthe command has been executed
Note right of HomeAssistant:HomeAssistant updates the \ndevice on UI with state \nreceived on State Topic]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="271.25" y="20" width="120" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="281.25" y="45" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="281.25">IoT Device</tspan></text></g><g class="actor"><rect x="271.25" y="765.75" width="120" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="281.25" y="790.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="281.25">IoT Device</tspan></text></g><line x1="331.25" x2="331.25" y1="58.75" y2="765.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="676.25" y="20" width="150" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="686.25" y="45" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="686.25">HomeAssistant</tspan></text></g><g class="actor"><rect x="676.25" y="765.75" width="150" height="38.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="686.25" y="790.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="686.25">HomeAssistant</tspan></text></g><line x1="751.25" x2="751.25" y1="58.75" y2="765.75" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="406.25" y="79.78125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="406.25">Register Device by</tspan><tspan dy="1.2em" x="406.25">publishing the MQTT message</tspan></text><line x1="331.25" x2="751.25" y1="116.6875" y2="116.6875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="771.25" y="136.6875" width="301.25" height="47.9375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="777.5" y="156.6875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="776.25">HomeAssistant adds the device</tspan><tspan dy="1.2em" x="776.25">on UI with unavailable status</tspan></text></g><g class="note"><rect x="91.25" y="204.625" width="220" height="28.75" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="96.25" y="224.625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="96.25">Device is initialised</tspan></text></g><g class="signal"><text x="341.25" y="254.40625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="341.25">MQTT message is</tspan><tspan dy="1.2em" x="341.25">published with status "device available"</tspan></text><line x1="331.25" x2="751.25" y1="291.3125" y2="291.3125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="771.25" y="311.3125" width="331.25" height="47.9375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="777.5" y="331.3125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="776.25">HomeAssistant updates the device</tspan><tspan dy="1.2em" x="776.25">on UI with available status</tspan></text></g><g class="signal"><text x="420.625" y="380.28125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="420.625">IoT Device subscribes</tspan><tspan dy="1.2em" x="420.625">to command topic of MQTT</tspan></text><line x1="331.25" x2="751.25" y1="417.1875" y2="417.1875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="386.25" y="428.6171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="386.25">HomeAssistant publishes the</tspan><tspan dy="1.2em" x="386.25">status on Command Topic when</tspan><tspan dy="1.2em" x="386.25">user updates the device from UI</tspan></text><line x1="751.25" x2="331.25" y1="494.328125" y2="494.328125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="20" y="514.328125" width="291.25" height="67.140625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="26.25" y="534.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="25">When IoT device receives the</tspan><tspan dy="1.2em" x="25">message on command topic</tspan><tspan dy="1.2em" x="25">it updates the device</tspan></text></g><g class="signal"><text x="366.25" y="592.8984375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="366.25">IoT device publishes the message on</tspan><tspan dy="1.2em" x="366.25">State Topic HomeAssistant informing</tspan><tspan dy="1.2em" x="366.25">the command has been executed</tspan></text><line x1="331.25" x2="751.25" y1="658.609375" y2="658.609375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="771.25" y="678.609375" width="261.25" height="67.140625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="777.5" y="698.609375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="776.25">HomeAssistant updates the</tspan><tspan dy="1.2em" x="776.25">device on UI with state</tspan><tspan dy="1.2em" x="776.25">received on State Topic</tspan></text></g></svg>